---
title: "Global settings"
vignette: >
  %\VignetteIndexEntry{Global settings}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
output: rmarkdown::html_vignette
bibliography: ../inst/REFERENCES.bib
csl: ../inst/information-science-and-technology.csl
link-citations: yes
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>", 
  tidy = TRUE
)

# to knit "child" Rmd files
knitr::opts_knit$set(root.dir = "../")

library(formatdown)
library(data.table)
library(knitr)

options(
  datatable.print.nrows = 15,
  datatable.print.topn = 3,
  datatable.print.class = TRUE
)
```

![](../man/figures/options-img.png){width=70%}    
<small>*option* by Mike Lawrence is licensed under CC BY 2.0 DEED <https://creativecommons.org/licenses/by/2.0/>.</small>


Global options are provided for those arguments most likely to be used throughout a document. For example, some users prefer a period (".") as a decimal marker, others prefer a comma (","). A user would likely prefer to set this option once rather than restating it in every function call.

Globally-set arguments can be overridden locally by assigning them in a function call.

## formatdown_options()

Set and examine several global options which affect the way in which formatdown displays its results. The options and their default settings are: 

        size         = NA_character_
        delim        = "$"
        decimal_mark = "."
        big_mark     = ""
        small_mark   = ""
        word_space   = "\\\\>"

<br>

*Arguments.* 

size

: Font size. Possible values are NA (default), "scriptsize", "small", "normalsize", "large", and "huge". If not NA, adds a prefix to the markup to invoke the macros `\scriptsize`, `\small`, `\normalsize`, etc.

delim

: Character vector of length one or two defining the math markup delimiters. Possible values include `c("$", "$")` or `c("\\(", "\\)")`. Alternatively, one can use `"$"` (default) or `"\\("`, both of which create appropriate left and right delimiters. If required by one's markup environment, custom 2-element (left and right) delimiters can be assigned.

decimal_mark

: Character. Possible values are a period (`"."` default) or a comma (`","`) to denote the numeric decimal point; passed to `formatC(decimal.mark)`. 

big_mark, small_mark

: Character. Possible values are empty (`""`, default) or "thin" to produce a LaTeX-style thin space (`"\\\\,"`) to separate numbers into groups of three to the left of the decimal mark (`big_mark`) or to the right of the decimal mark (`small_mark`); passed to `formatC(big.mark, small.mark)`.

word_space

: Character. Defines the LaTeX-style math-mode macro to preserve a horizontal space between words. Default is ($\small\mathtt{\verb|"\\\\>"|}$). Alternatives include ($\small\mathtt{\verb|"\\\\:"|}$) or ($\small\mathtt{\verb|"\\\\ "|}$).




## stuff

Suppose we want to change `size` and `decimal_mark` in a formatted column. We can set these arguments in the usual fashion, 

```{r}
x <- c(2.1e-4, 3.2e-3, 4.3e-2, 5.4e-1, 6.5)

# Construct a formatted data frame
sci  <- format_sci(x, 2, size = "large", decimal_mark = ",")
engr <- format_engr(x, 2, size = "large", decimal_mark = ",")
DT <- data.table(x, sci, engr)

# Render in the document
knitr::kable(DT, 
             align = "r", 
             caption = "Using the `size` and `decimal_mark` arguments",
             col.names = c("x (as stored in R)", "scientific notation", "engineering notation"))
```

Alternatively, we can set these arguments globally using `formatdown_options()`. Available options and their default settings are: 

        size         = NA_character_
        delim        = "$"
        decimal_mark = "."
        big_mark     = ""
        small_mark   = ""

The `formatdown_options()` function can be used to "get" the current values and to "set" new values. For example, 

```{r}
# View the current settings
formatdown_options("size", "decimal_mark")
```

To create new global settings, 

```{r}
formatdown_options(size = "large", 
                   decimal_mark = ",")

# View the new settings
formatdown_options("size", "decimal_mark")
```

Format the same data frame without the optional arguments in the function calls,  

```{r}
# Construct a formatted data frame
sci  <- format_sci(x, 2)
engr <- format_engr(x, 2)
DT <- data.table(x, sci, engr)

# View one vector
sci

# Render in the document
knitr::kable(DT, 
             align = "r", 
             caption = "Selected arguments set using `formatdown_options()`",
             col.names = c("x (as stored in R)", "scientific notation", "engineering notation"))
```

Options can be reset to their package defaults, 

```{r}
reset_formatdown_options()

# View the reset options
formatdown_options("size", "decimal_mark")
```

From this point forward, the default formatdown arguments are used, 

```{r}
# Construct a formatted data frame
sci  <- format_sci(x, 2)
engr <- format_engr(x, 2)
DT <- data.table(x, sci, engr)

# View one vector
sci
```

```{r}
#| echo: false
formatdown_options(size = "small")
sci  <- format_numbers(x, 2, "sci")
engr <- format_numbers(x, 2, "engr")
DT <- data.table(x, sci, engr)
```

```{r}
# Render in the document
knitr::kable(DT, 
             align = "r", 
             caption = "Default arguments restored",
             col.names = c("x (as stored in R)", "scientific notation", "engineering notation"))
```

```{r}
#| echo: false
reset_formatdown_options()
```

illustrating that the default options have been restored.  


## References

